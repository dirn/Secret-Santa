!function(e){var t=e(window),n=e(document.body),r=e(".navbar").outerHeight(!0)+10;n.scrollspy({target:".xmas-sidebar",offset:r});t.on("load",function(){n.scrollspy("refresh")});e(".xmas-container [href=#]").click(function(e){e.preventDefault()});setTimeout(function(){var t=e(".xmas-sidebar");t.affix({offset:{top:function(){var n=t.offset().top,r=parseInt(t.children(0).css("margin-top"),10),i=e(".xmas-main-nav").height();return this.top=n-i-r}}})},100);setTimeout(function(){e(".xmas-top").affix()},100);e(".xmas-section").on("click","button",function(){var t=e(this),n=t.data("id"),r="",i="POST";if(t.hasClass("xmas-claim"))r="/claim";else if(t.hasClass("xmas-unclaim"))r="/unclaim";else if(t.hasClass("xmas-purchase")){r="/purchase";i="PUT"}else if(t.hasClass("xmas-return")){r="/return";i="PUT"}e.ajax({url:r,type:i,data:{id:n}}).done(function(e){t.closest(".xmas-item").replaceWith(e)})});e(".xmas-wishlist").on("click","button",function(t){var n=e(this),r=n.closest(".xmas-item");if(n.hasClass("btn-add"))return;if(n.hasClass("btn-cancel")){r.find("form").remove();r.find(".btn-group").show();return}t.preventDefault();var i=n.closest(".xmas-wishlist").find("form").attr("action");i+="/"+n.data("id");var s="",o={},u=null;if(n.hasClass("btn-edit")){s="GET";u=function(e){r.find(".btn-group").hide();r.append(e)}}else if(n.hasClass("btn-update")){s="PUT";o=n.closest("form").serialize();u=function(e){if(e=="OK"){r.find("form").remove();r.find(".btn-group").show()}else r.html(e)}}else if(n.hasClass("btn-delete")){if(!confirm("Are you sure you want to delete "+r.find("h3").html()+"?"))return;s="DELETE";u=function(){r.parent().remove()}}e.ajax({url:i,type:s,data:o}).done(u)})}(window.jQuery);